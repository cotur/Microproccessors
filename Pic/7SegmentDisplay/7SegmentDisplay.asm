	LIST P=16F877A
	INCLUDE "P16F877A.INC"


#DEFINE BTTN PORTB

	ORG 0x00
	GOTO START

START

	CLRF PORTB
	CLRF PORTD
	BSF STATUS,5
	MOVLW b'10001111'
	MOVWF TRISB
	CLRF TRISD

	CLRWDT
	MOVLW b'11010111'
	MOVWF OPTION_REG
	BCF STATUS,5


CHECK
	BTFSC PORTB, 7
	GOTO WAIT
	GOTO CHECK
RESUME
	MOVF PORTD,0
	
	SWAPF PORTD,1
	BCF PORTD,0
	BCF PORTD,1
	BCF PORTD,2
	BCF PORTD,3

	BTFSC PORTB,0
	BSF PORTD,0
	BTFSC PORTB,1
	BSF PORTD,1
	BTFSC PORTB,2
	BSF PORTD,2
	BTFSC PORTB,3
	BSF PORTD,3
	GOTO CHECK

WAIT
	BTFSS PORTB,7
	GOTO RESUME
	GOTO WAIT
END